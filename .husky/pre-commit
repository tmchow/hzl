# Verify pnpm-lock.yaml is in sync with package.json
pnpm install --frozen-lockfile --ignore-scripts 2>/dev/null || {
  echo "âŒ pnpm-lock.yaml is out of sync with package.json"
  echo "   Run 'pnpm install' and commit the updated lock file."
  exit 1
}

# Sync snippets and stage only files the script actually changed
changed_files=$(node scripts/sync-snippets.js --porcelain 2>/dev/null)
if [ -n "$changed_files" ]; then
  echo "$changed_files" | xargs git add --
fi
